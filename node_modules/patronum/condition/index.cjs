"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.condition = condition;

var _effector = require("effector");

function condition({
  if: test,
  then: thenBranch,
  else: elseBranch,
  source = (0, _effector.createEvent)({
    name: "source",
    sid: "epke23"
  })
}) {
  const checker = _effector.is.unit(test) || isFunction(test) ? test : value => value === test;

  if (thenBranch) {
    (0, _effector.guard)({
      and: [{
        source,
        filter: checker,
        target: thenBranch
      }],
      or: {
        sid: "9tug3k"
      }
    });
  }

  if (elseBranch) {
    (0, _effector.guard)({
      and: [{
        source,
        filter: inverse(checker),
        target: elseBranch
      }],
      or: {
        sid: "a9shb1"
      }
    });
  }

  return source;
}

function isFunction(value) {
  return typeof value === 'function';
}

function inverse(fnOrUnit) {
  if (_effector.is.unit(fnOrUnit)) {
    return fnOrUnit.map(value => !value);
  }

  return value => !fnOrUnit(value);
}