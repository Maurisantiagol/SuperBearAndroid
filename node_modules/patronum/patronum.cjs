"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("effector"));function r(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var n=r((function(e,r){function n(e){throw new Error(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.combineEvents=function({events:e,reset:r,target:o=(0,t.createEvent)({name:"target",sid:"3pez5"})}){t.is.unit(o)||n("target should be a unit");r&&!t.is.unit(r)&&n("reset should be a unit");return(0,t.withRegion)(o,(()=>{const n=Object.keys(e),i=Array.isArray(e)?[...n].fill(""):{},s=(0,t.createStore)(n.length,{name:"$counter",sid:"-dszn9a"}),a=(0,t.createStore)(i,{name:"$results",sid:"boz3x7"});s.reset((0,t.sample)({and:[o],or:{sid:"-8yzcn6"}})),a.reset(o),r&&(s.reset((0,t.sample)({and:[r],or:{sid:"-72suil"}})),a.reset(r));for(const i of n){const n=(0,t.createStore)(!1,{name:"$isDone",sid:"ucs7nc"}).on(e[i],(()=>!0)).reset(o);r&&n.reset(r),s.on(n,(e=>e-1)),a.on(e[i],((e,t)=>{const r=Array.isArray(e)?[...e]:{...e};return r[i]=t,r}))}(0,t.guard)({and:[{source:(0,t.sample)({and:[a,(0,t.merge)(Object.values(e),{name:"and",sid:"-l8g4ey"})],or:{name:"source",sid:"uf92v9"}}),filter:s.map((e=>0===e)),target:o}],or:{sid:"ciekm0"}})})),o}})),o=r((function(e,r){function n(e){return t.is.unit(e)?e.map((e=>!e)):t=>!e(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.condition=function({if:e,then:r,else:o,source:i=(0,t.createEvent)({name:"source",sid:"epke23"})}){const s=t.is.unit(e)||(a=e,"function"==typeof a)?e:t=>t===e;var a;r&&(0,t.guard)({and:[{source:i,filter:s,target:r}],or:{sid:"9tug3k"}});o&&(0,t.guard)({and:[{source:i,filter:n(s),target:o}],or:{sid:"a9shb1"}});return i}})),i=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.debounce=function({source:e,timeout:r,target:n}){if(!t.is.unit(e))throw new TypeError("source must be unit from effector");if(t.is.domain(e,{sid:"iu8yzo"}))throw new TypeError("source cannot be domain");if("number"!=typeof r||r<0||!Number.isFinite(r))throw new Error(`timeout must be positive number or zero. Received: "${r}"`);let o,i;const s=n??(0,t.createEvent)({name:"tick",sid:"-xw52dh"}),a=(0,t.createEffect)((e=>(clearTimeout(i),o&&o(),new Promise(((t,n)=>{o=n,i=setTimeout(t,r,e)})))),{name:"timerFx",sid:"m8kfsq"});return(0,t.forward)({and:{from:e,to:a},or:{sid:"k4foqk"}}),(0,t.forward)({and:{from:a.done.map((({result:e})=>e)),to:s},or:{sid:"k76npd"}}),s}})),s=r((function(e,r){function n(e){return t.is.store(e,{sid:"-j30z7b"})?"store":t.is.effect(e,{sid:"-j1dlf8"})?"effect":t.is.event(e,{sid:"-io6j6k"})?"event":t.is.domain(e,{sid:"-imj5eh"})?"domain":t.is.unit(e)?"unit":"unknown"}function o(e,t,r=""){const n=r+s(e);e.watch((e=>{console.info(`[${t}] ${n}`,e)}))}function i(e){o(e.done,"effect",s(e)+"."),o(e.fail,"effect",s(e)+".")}function s(e){return e.compositeName&&e.compositeName.fullName?e.compositeName.fullName:e.shortName?e.shortName:e.name?e.name:""}Object.defineProperty(r,"__esModule",{value:!0}),r.debug=function(...e){for(const r of e){const e=n(r);(t.is.store(r,{sid:"8mdztw"})||t.is.effect(r,{sid:"-gueih2"})||t.is.event(r,{sid:"-gueh0j"}))&&o(r,e),t.is.effect(r,{sid:"-jlpzbv"})&&i(r),t.is.domain(r,{sid:"-jjisyf"})&&(r.onCreateEvent((e=>o(e,"event"))),r.onCreateStore((e=>o(e,"store"))),r.onCreateEffect(i))}}})),a=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.delay=function({source:e,timeout:r,target:n=(0,t.createEvent)({name:"target",sid:"-z2vw3w"})}){if(!t.is.unit(e))throw new TypeError("source must be a unit from effector");if(!t.is.unit(n))throw new TypeError("target must be a unit from effector");const o=function(e){if(t.is.store(e,{sid:"-va560a"})||"function"==typeof e||"number"==typeof e)return e;throw new TypeError(`'timeout' argument must be a function, Store, or a number. Passed "${typeof e}"`)}(r),i=(0,t.createEffect)((({payload:e,milliseconds:t})=>new Promise((r=>{setTimeout(r,t,e)}))),{name:"timerFx",sid:"-584o7j"});return(0,t.sample)({and:[{source:(0,t.combine)({and:[{milliseconds:o}],or:{name:"source",sid:"9rbdjo"}}),clock:e,fn:({milliseconds:e},t)=>({payload:t,milliseconds:"function"==typeof e?e(t):e}),target:i}],or:{sid:"-wmj29s"}}),(0,t.forward)({and:{from:i.doneData,to:n},or:{sid:"-vsadmx"}}),n}})),u=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.every=function(e,r){let n,o=[],i=()=>!1;Array.isArray(e)?(o=e,i=r):Array.isArray(e.stores)&&(o=e.stores,i=e.predicate);s=i,n="function"==typeof s?i:t.is.store(i,{sid:"sid3ut"})?i.map((e=>t=>e===t)):e=>e===i;var s;const a=(0,t.combine)({and:[o],or:{name:"$values",sid:"h09uhg"}}),u=n;return(0,t.combine)({and:[u,a,(e,t)=>t.every(e)],or:{sid:"hfkdw9"}})}})),c=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.format=function(e,...r){return(0,t.combine)({and:[r,t=>e.reduce(((r,n,o)=>r.concat(function(e,t){return t===e.length-1}(e,o)?n:`${n}${function(e){if(Array.isArray(e))return e.map((e=>String(e))).join(", ");return String(e)}(t[o])}`)),"")],or:{sid:"-yrbthp"}})}})),d=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.inFlight=function({effects:e,domain:r}){if(r){const e=r.createStore(0,{name:"$inFlight",sid:"-y7vg7t"});return r.onCreateEffect((t=>{e.on(t,(e=>e+1)).on(t.finally,(e=>e-1))})),e}return(0,t.combine)({and:[e.map((e=>e.inFlight)),e=>e.reduce(((e,t)=>e+t),0)],or:{sid:"ubqxa7"}})}})),f=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.interval=function({timeout:e,start:r,stop:n,leading:o=!1,trailing:i=!1}){const s=(0,t.createEvent)({name:"tick",sid:"uo9p3s"}),a=(0,t.createStore)(!1,{name:"$isRunning",sid:"-wxesi8"}),u=function(e){if(t.is.store(e,{sid:"6p7767"}))return e;if("number"==typeof e)return(0,t.createStore)(e,{and:{name:"$timeout"},sid:"5hw6se"});throw new TypeError(`timeout parameter in interval method should be number or Store. "${typeof e}" was passed`)}(e),c=a.map((e=>!e)),d=(0,t.createEvent)({name:"saveTimeout",sid:"as5clk"}),f=(0,t.createStore)(null,{name:"$timeoutId",sid:"-bh90bo"}).on(d,((e,t)=>t)),m=(0,t.createEvent)({name:"saveReject",sid:"-64swis"}),l=(0,t.createStore)((()=>{}),{name:"$rejecter",sid:"eabbu7"}).on(m,((e,t)=>t)),p=(0,t.createEffect)((e=>new Promise(((t,r)=>{const n=setTimeout(t,e);d(n),m(r)}))),{name:"timeoutFx",sid:"7lc3mj"}),y=(0,t.attach)({and:{source:[f,l],effect:([e,t])=>{t(),e&&clearTimeout(e)}},or:{name:"cleanupFx",sid:"pcn5jq"}});(0,t.guard)({and:[{clock:r,source:u,filter:c,target:p}],or:{sid:"-w5qmwp"}}),o&&(0,t.guard)({and:[{clock:r,filter:c,target:s}],or:{sid:"-vpslni"}});(0,t.sample)({and:[{clock:r,fn:()=>!0,target:a}],or:{sid:"-vaed34"}}),(0,t.guard)({and:[{clock:p.done,source:u,filter:a,target:p}],or:{sid:"-v73liy"}}),(0,t.sample)({and:[{clock:p.done,fn:()=>{},target:s}],or:{sid:"-urpcwu"}}),n&&(i&&(0,t.sample)({and:[{clock:n,target:s}],or:{sid:"-uanqf7"}}),a.on(n,(()=>!1)),(0,t.sample)({and:[{clock:n,target:y}],or:{sid:"6lcmyy"}}));return{tick:s,isRunning:a}}})),m=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.pending=function({effects:e,domain:r,of:o="some"}){if(!t.is.domain(r,{sid:"97b92c"})&&!e)throw new TypeError("domain or effects should be passed");if("some"!==o&&"every"!==o)throw new TypeError(`strategy parameter "of" can be "every" or "some". Passed: "${o}"`);let i=e??[];const s=n[o];r&&(i=[],r.onCreateEffect((e=>i.push(e))));return(0,t.combine)({and:[i.map((e=>e.pending)),s],or:{sid:"a37bj0"}})};const n={some:e=>e.some(Boolean),every:e=>e.every(Boolean)}})),l=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.reset=function({clock:e,target:t}){const r=Array.isArray(t)?t:[t],n=Array.isArray(e)?e:[e];r.forEach((e=>{e.reset.call(e,n)}))}})),p=r((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.reshape=function({source:e,shape:t}){const r={};for(const n in t)if(n in t){const o=t[n];r[n]=e.map((e=>{const t=o(e);return void 0===t?null:t}))}return r}})),y=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.snapshot=function({source:e,clock:r,fn:n=(e=>e)}){const o=n(e.defaultState),i=r?(0,t.sample)({and:[e,r,n],or:{name:"onSnapshot",sid:"-auitd0"}}):(0,t.sample)({and:[{source:e,fn:n}],or:{name:"onSnapshot",sid:"-auir6n"}}),s=(0,t.createStore)(o,{name:"$snapshot",sid:"-7zyoaf"});return s.on(i,((e,t)=>t)),s}})),b=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.some=function(e,r){let n,o=[],i=()=>!1;Array.isArray(e)?(o=e,i=r):Array.isArray(e.stores)&&(o=e.stores,i=e.predicate);s=i,n="function"==typeof s?i:t.is.store(i,{sid:"zbwu0l"})?i.map((e=>t=>e===t)):e=>e===i;var s;const a=(0,t.combine)({and:[o],or:{name:"$values",sid:"-lv5do0"}}),u=n;return(0,t.combine)({and:[u,a,(e,t)=>t.some(e)],or:{sid:"-efc5w7"}})}})),v=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.splitMap=function({source:e,cases:r}){const n={};let o=t.is.store(e,{name:"current",sid:"-htjkz7"})?e.updates:e;for(const e in r)if(e in r){const t=r[e];n[e]=o.filterMap(t),o=o.filter({fn:e=>!t(e)})}return n.__=o,n}})),g=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.spread=function({targets:e,source:r=(0,t.createEvent)({name:"source",sid:"-iel8gi"})}){for(const n in e)if(n in e){const o=(0,t.guard)({and:[{source:r,filter:e=>"object"==typeof e&&null!==e&&n in e}],or:{name:"hasTargetKey",sid:"-gh83lo"}});t.is.store(e[n],{sid:"jliekw"})?e[n].on(o,((e,t)=>t[n])):(0,t.sample)({and:[{source:o,fn:e=>e[n],target:e[n]}],or:{sid:"lnzpe6"}})}return r}})),h=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.status=function({effect:e,defaultValue:r="initial"}){const n=(0,t.createStore)(r,{name:"$status",sid:"abrgim"});return n.on(e,(()=>"pending")).on(e.done,(()=>"done")).on(e.fail,(()=>"fail")),n}})),w=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.throttle=function({source:e,timeout:r,target:n=(0,t.createEvent)({name:"target",sid:"cenyj5"})}){if(!t.is.unit(e))throw new TypeError("source must be unit from effector");if("number"!=typeof r||r<0)throw new Error("timeout must be positive number or zero");const o=(0,t.createEffect)((()=>new Promise((e=>setTimeout(e,r)))),{name:"timerFx",sid:"uv7gwq"});return(0,t.guard)({and:[{source:e,filter:o.pending.map((e=>!e)),target:o}],or:{sid:"-iy4kn2"}}),(0,t.sample)({and:[{source:e,clock:o.done,target:n}],or:{sid:"-ija4mb"}}),n}})),j=r((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.time=function({clock:e,getNow:r,initial:o}){const i=r??n,s=(0,t.createEffect)(i,{name:"readNowFx",sid:"459ysb"}),a=(0,t.restore)(s,o??i(),{name:"$time",sid:"-ys9vce"});return(0,t.forward)({and:{from:e,to:s},or:{sid:"rdje9v"}}),a};const n=()=>Date.now()})),_=n.combineEvents,E=o.condition,x=i.debounce,k=s.debug,P=a.delay,M=u.every,O=c.format,$=d.inFlight,A=f.interval,S=m.pending,T=l.reset,z=p.reshape,F=y.snapshot,q=b.some,N=v.splitMap,C=g.spread,R=h.status,D=w.throttle,B=j.time,I={combineEvents:_,condition:E,debounce:x,debug:k,delay:P,every:M,format:O,inFlight:$,interval:A,pending:S,reset:T,reshape:z,snapshot:F,some:q,splitMap:N,spread:C,status:R,throttle:D,time:B};exports.combineEvents=_,exports.condition=E,exports.debounce=x,exports.debug=k,exports.default=I,exports.delay=P,exports.every=M,exports.format=O,exports.inFlight=$,exports.interval=A,exports.pending=S,exports.reset=T,exports.reshape=z,exports.snapshot=F,exports.some=q,exports.splitMap=N,exports.spread=C,exports.status=R,exports.throttle=D,exports.time=B;
//# sourceMappingURL=patronum.cjs.map
